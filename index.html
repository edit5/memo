<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ë¸Œë¼ìš°ì € ë©”ëª¨ì¥</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 1rem;
      font-family: 'Noto Sans KR', sans-serif;
      font-size: 1rem;
      line-height: 1.5;
    }

    #editor {
      width: 100%;
      min-height: 300px;
      padding: 1rem;
      background-color: #f2f2f2;
      box-sizing: border-box;
    }

    #editor:focus {
      outline: none;
    }

    .button-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .group-label {
      font-size: 0.7rem;
      color: #666;
      white-space: nowrap;
    }

    button {
      font-size: 0.7rem;
      border: none;
      background: none;
      cursor: pointer;
      padding: 0.2rem 0.4rem;
    }

    button:hover {
      background-color: #e0e0e0;
      border-radius: 4px;
    }

    #stats {
      position: fixed;
      right: 1rem;
      bottom: 1rem;
      font-size: 0.7rem;
      color: #444;
      background: #f7f7f7;
      padding: 0.6rem 0.8rem;
      border-radius: 6px;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
      line-height: 1.4;
    }
  </style>
</head>

<body>

  <!-- ë©”ëª¨ ì…ë ¥ ì˜ì—­ -->
  <div id="editor" contenteditable></div>

  <!-- ë²„íŠ¼ ì˜ì—­ -->
  <div style="margin-top:1rem;">
    <div class="button-group">
      <span class="group-label">[ì…ë ¥]</span>
      <button onclick="replaceBullet()">â€¢ê°œìš”(--)</button>
      <button onclick="boldText()">Bë³¼ë“œ(**)</button>
      <button onclick="convertToPlainText()">â†º í”Œë ˆì¸í…ìŠ¤íŠ¸</button>
      <button onclick="insertDate()">ğŸ•’ ë‚ ì§œ</button>
    </div>

    <div class="button-group">
      <span class="group-label">[ë™ì‘]</span>
      <button onclick="copyText()">ğŸ“‹ í…ìŠ¤íŠ¸ë³µì‚¬</button>
      <button onclick="copyAndOpenKeep()">ï¼  Google Keep</button>
      <button onclick="clearEditor()">âœ– ì „ì²´ì‚­ì œ</button>
    </div>
  </div>

  <!-- í†µê³„ ì˜ì—­ -->
  <div id="stats"></div>

  <script>
    const editor = document.getElementById('editor');
    const stats = document.getElementById('stats');

    function replaceBullet() {
      editor.innerHTML = editor.innerHTML.replace(/--/g, 'â€¢');
      updateStats();
    }

    function boldText() {
      editor.innerHTML = editor.innerHTML.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
      updateStats();
    }

    function insertDate() {
      const now = new Date();
      const yy = String(now.getFullYear()).slice(2);
      const mm = String(now.getMonth() + 1).padStart(2, '0');
      const dd = String(now.getDate()).padStart(2, '0');
      const hh = String(now.getHours()).padStart(2, '0');
      const min = String(now.getMinutes()).padStart(2, '0');
      const dateText = `${yy}å¹´${mm}æœˆ${dd}æ—¥ ${hh}:${min}`;
      const html = `<span style="font-size:0.7em;background:#e0e0e0;padding:0.1em 0.4em;border-radius:4px;">${dateText}</span><br><br>`;
      document.execCommand('insertHTML', false, html);
      updateStats();
    }

    function copyText() {
      const textarea = document.createElement('textarea');
      textarea.value = editor.innerText;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      alert('í…ìŠ¤íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆë‹¤');
    }

    function copyAndOpenKeep() {
      const textarea = document.createElement('textarea');
      textarea.value = editor.innerText;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      window.open('https://keep.google.com/', '_blank');
    }

    function clearEditor() {
      editor.innerText = '';
      updateStats();
    }

    function convertToPlainText() {
      let plain = editor.innerText;
      plain = plain.replace(/â€¢/g, '');
      editor.innerText = plain;
      updateStats();
    }

    function updateStats() {
      const text = editor.innerText;
      const totalChars = text.length;
      const noSpaceChars = text.replace(/\s/g, '').length;
      const page200 = (totalChars / 200).toFixed(2);
      const pageHwp = (totalChars / 1750).toFixed(2);
      const pageBook = (totalChars / 650).toFixed(2);
      const sentenceCount = (text.match(/[.!?]/g) || []).length;
      const paragraphCount = text.trim() ? text.trim().split(/\n+/).length : 0;

      stats.innerHTML = `
        <div>ì´ê¸€ììˆ˜: ${totalChars}ì Â· ê³µë°±ì œì™¸: ${noSpaceChars}ì</div>
        <div>200ì›ê³ ì§€: ${page200}ì¥ Â· ì•„ë˜í•œê¸€: ${pageHwp}ì¥ Â· ì‹ êµ­íŒ: ${pageBook}ì¥</div>
        <div>ë¬¸ì¥ê°œìˆ˜(ì¢…ê²°ë¶€í˜¸ê°œìˆ˜): ${sentenceCount}ê°œ Â· ë¬¸ë‹¨ê°œìˆ˜: ${paragraphCount}ê°œ</div>
      `;
    }

    editor.addEventListener('input', updateStats);

    window.addEventListener('DOMContentLoaded', () => {
      editor.focus();
    });

    updateStats();
  </script>

</body>
</html>
